import { useState, useEffect } from "react";
import axios from "axios";
export const VulnerabilityDisplay = () => {
    const [response, setResponse] = useState("s");
    useEffect(()=>{
        axios.get('http://127.0.0.1:5000')
        .then(res => {
            setResponse(res.data)
        });
    },[])
    const data = {
        packages: [
            {
                "name": 'package 1',
                "vulnerabilities": [
                    {
                        "CVE": "cve1",
                        "description": "herre it goes the descriptiojn,s m,d "
                    },
                    {
                        "CVE": "cve2",
                        "description": "herre it goes the descriptiojn,s m,d "
                    }
                ]
            },
            {
                "name": 'package 2',
                "vulnerabilities": [
                    {
                        "CVE": "cve11",
                        "description": "herre it goes the descriptiojn,s m,d "
                    },
                    {
                        "CVE": "cve12",
                        "description": "herre it goes the descriptiojn,s m,d "
                    }
                ]
            }
        ]
    }

    return(
        <div>
            <ul>
                {data.packages.map(packagename => {
                    return(
                        <div key={packagename.name}>
                            <h3>{packagename.name}</h3>
                            {packagename.vulnerabilities.length>0 && packagename.vulnerabilities.map(vulnerability => {
                                return(
                                    <li key={vulnerability.CVE}>
                                        {vulnerability.description}
                                    </li>
                                )
                            })}

                            {response}
                        </div>
                    )
                })}
            </ul>
        </div>
    )
}